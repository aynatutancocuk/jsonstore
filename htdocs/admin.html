<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <script type="text/javascript" src="js/jquery-latest.js"></script>
        <script type="text/javascript" src="js/fade/jquery.fade.js"></script>
        <script type="text/javascript" src="js/scrollTo/jquery.scrollTo.js"></script>
        <script type="text/javascript" src="js/json2.js"></script>
        <script type="text/javascript" src="js/jsonstore.js"></script>
        <script type="text/javascript" src="js/admin.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                em = new EntryManager('http://localhost:8080/');
                
                // Load entries.
                em.search({}, {
                    size: 10,
                    offset: 0,
                    success: function(entries, count) {
                        $.each(entries, function(i, entry) {
                            $(
                                '<li><a href="#" class="action" title="Edit this document">' + 
                                entry.__id__ + 
                                '</a></li>'
                            ).appendTo(
                                'ul#entries'
                            ).find('a').click(function() {
                                jsonToDom(entry).entryEdit();
                            });
                        });
                    }
                });

                $("#new").click(function() {
                    $('#edit').html('');
                    $(
                        '<dl>' + 
                        '<dt>__id__</dt>' + 
                        '<dd><a href="#" class="editable action">leave blank for auto-generated</a></dd>' + 
                        '<dt>__updated__</dt>' + 
                        '<dd><a href="#" class="editable action">leave blank for current time</a></dd>' + 
                        '</dl>'
                    ).initDl().appendTo('#edit');

                    $(
                        '<a href="#" title="Save document">' + 
                        '<img src="images/icons/database_save.png" />' + 
                        '</a>'
                    ).prependTo('#edit dl').click(function() {
                        $(this).entrySave();
                    });
                });
            });
        </script>
        <style>
            body {
                font-size: 90%;
                font-family: Helvetica, sans-serif;
                margin: 0;
                padding: 3px;
            }

            #results, #search {
                float: left;
                width: 50%;
            }

            #edit {
                clear: left;
                width: 100%;
            }

            img {
                border: 0;
                padding: 0 3px;
            }

            dl {
                background-color: #eee;
                border: 1px solid #ddd;
                padding: 3px;
                margin: 0;
            }

            dt {
                font-weight: bold;
                margin: 6px 0 3px 3px;
            }

            dd {
                margin-bottom: 3px;
                margin-left: 18px;
            }

            .action {
                color: #888;
                font-style: italic;
            }

            #entries {
                background-color: #eee;
                padding-left: 0;
                margin-left: 0;
                border-bottom: 1px solid #ddd;
                border-right: 1px solid #ddd;
                border-left: 1px solid #ddd;
            }

            #entries li {
                list-style: none;
                margin: 0;
                padding: 3px;
                border-top: 1px solid #ddd;
            }

            #entries li:hover, #entries li:hover a {
                background-color: #aaa;
                color: white;
            }

            #entries li a {
                display: block;
                text-decoration: none;
                width: 100%;
            }

            #entries .header, #entries .header a {
                background-color: #888;
                color: white;
            }

            #header {
                background-color: #aaa;
                border: 1px solid #888;
                color: white;
                padding: 3px 18px;
            }

            #header h1 {
                font-size: 120%;
                font-weight: normal;
            }

            dt img, dd img {
                filter:alpha(opacity=25); 
                -moz-opacity: 0.25; 
                opacity: 0.25;
            }

            dt:hover img, dd:hover img {
                filter:alpha(opacity=100); 
                -moz-opacity: 1.0; 
                opacity: 1.0;
            }
        </style>
    </head>
    <body>
        <div id="header">
            <h1>JSONStore @ http://localhost:8080/</h1>
        </div>
        <div id="results">
            <ul id="entries">
                <li class="header"><a href="#" class="action" id="new">Add a new document</a></li>
            </ul>
        </div>
        <div id="search"></div>
        <div id="edit"></div>
    </body>
</html>
